<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <script>
        var listaAdmin = [];
        var listaCliente = [];

        function UsuarioWeb(login, pss, nombre, dni) {
            this.login = login;
            this.pss = pss;
            this.nombre = nombre;
            this.dni = dni;
        }

        function UsuarioAdministrador(crearAlta, crearTabla) {
            this.crearAlta = crearAlta;
            this.crearTabla = crearTabla;

            this.check = function(id) {
                alert("Bienvenido " + listaAdmin[id].nombre + ". Eres un administrador");

            }
        }

        function UsuarioCliente(peso, altura, edad, sexo, imc, fmc) {
            this.peso = peso;
            this.altura = altura;
            this.edad = edad;
            this.sexo = sexo;
            this.imc = imc;
            this.fmc = fmc;

            this.check = function(id) {
                alert("Bienvenido " + listaCliente[id].nombre + ". Eres un cliente");
            }
        }

        function newAdmin() {
            alert("Está creando un nuevo administrador. Introduzca los valores pedidos.");
            var nombre = prompt("Nombre: ");
            var dni = valDNI("DNI: ");
            var login = prompt("Nick: ");
            var pss = valPss("Contraseña: ");

            UsuarioAdministrador.prototype = new UsuarioWeb(login, pss, nombre, dni);
            var admin = new UsuarioAdministrador(crearAlta, crearTabla);
            listaAdmin.push(admin);
        }

        function newCliente() {
            alert("Está creando un nuevo cliente. Introduzca los valores pedidos.");
            var nombre = prompt("Nombre: ");
            var dni = valDNI("DNI: ");
            var login = prompt("Nick: ");
            var pss = valPss("Contraseña: ");

            var peso = prompt("Peso: ");
            var altura = prompt("Altura: ");
            var edad = prompt("Edad: ");
            var sexo = prompt("Sexo: ");
            var imc = prompt("IMC: ");
            var fcm = prompt("FCM: ")

            UsuarioCliente.prototype = new UsuarioWeb(login, pss, nombre, dni);
            var cliente = new UsuarioCliente(peso, altura, edad, sexo, imc, fmc);
            listaCliente.push(cliente);
        }


        function valDNI() {
            var dni = prompt("DNI: ");
            var ptrDni = /^[0-9]{8}[A-Z]{1}$/i;

            while (!ptrDni.test(dni)) {
                alert("DNI invalido");
                var dni = prompt("DNI: ");
            }
            return dni;
        }

        function valPss() {
            var pss = prompt("Contraseña:");
            if (pss.length < 8) {
                alert("La contraseña debe tener entre 6 y 16 caracteres.");
                var pss = prompt("Contraseña: ");
            }
            if (pss.search(/[a-z]/i) < 0) {
                alert("La contraseña debe contener letras.");
                var pss = prompt("Contraseña: ");
            }
            if (pss.search(/[0-9]/) < 0) {
                alert("La contraseña debe contener números.");
                var pss = prompt("Contraseña: ");
            }
            return pss;
        }

        function logear() {
            alert("Comprobando");
            buscarAdmin();
            buscarClient();
        }

        function buscarClient() {
            listaCliente.forEach(element => {
                if (document.getElementById("login").value == element.login && document.getElementById("password").value == element.pss) {
                    element.check(login);
                }
            })
        }

        function buscarAdmin() {
            listaAdmin.forEach(element => {
                if (document.getElementById("login").value == element.login && document.getElementById("password").value == element.pss) {
                    element.check(login);
                }
            })
        }
    </script>

</head>

<body>
    <input type="button" onclick="newAdmin()" value="CREAR USUARIO ADMINISTRADOR">
    <input type="button" onclick="newCliente()" value="CREAR USUARIO CLIENTE">
    <!--Formulario para login-->
    <form id="loginForm">
        <label for="login">Login:&nbsp;</label>
        <input type="text" name="login" id="login"><br />
        <label for="password">Contraseña:&nbsp;</label>
        <input type="text" name="password" id="password"><br />
        <input type="button" onclick="logear()" value="Entrar">
    </form>

    <script>
    </script>
</body>

</html>

<!-- 
    var listaAdmin=[];
    
    var alumno1.prototype= new usuarioWeb(dcds,cdasc,dfd,dscdsc);
    
    
-->